{% extends "header.html" %}

{% comment %} {% extends "header.html" %}

{% block content %}

<div class="container mt-5 ">

<table class="table table-dark table-striped">
    <thead>
      <tr>
        <th scope="col">Image</th>
        <th scope="col">Product</th>
        <th scope="col">Quantity</th>
        <th scope="col">status</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    <tbody>
      {% for item in orders %}
      <tr>
        
        <td><img src="{{item.product.image.url}}" alt="image"></td>
        <td>{{item.product.name}}</td>
        <td>{{item.quantity}}</td>
        
        <td>
            {% if item.is_cancelled %}
            <p>Cancelled</p>
            {% else %}
            {{item.status}}
            {% endif %}
            
        
        </td>
        
        <td>

          <a href="{% url 'order-detail' item.id %}">order detail</a>
            {% comment %} {% if item.is_cancelled %}
                <p style="color:red">Cancelled</p>

            {% elif item.status == "Delivered" %}
                <p style="color:green">Delivered</p>
                <a href="{% url 'product-review' item.product.id %}">add review</a>

            {% elif item.status == "Cancelled" %}
                <p style="color:red">Cancelled</p>
            {% else %}
            
                <a href="{% url 'order-cancel' item.id %}"><button>Cancel order</button></a> 
            {% endif %} {% endcomment %}
            
            
        
{% comment %}         
        </td>
        
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>


{% endblock content %} {% endcomment %}








{% block content %}
<!-- orders.html -->
<!-- orders.html -->
<!-- orders.html -->

    <div class="orders-container">
        <h1>Your Orders</h1>
        {% if orders %}
            {% for order in orders %}
            <a href="{% url 'order-detail' order.id %}">
                <div class="orders-order">
                    <div class="orders-order-details">
                        <div class="orders-order-id">Order ID: {{ order.id }}</div>
                        <div class="orders-order-date">Date: {{ order.created_at }}</div>

                      {% if order.is_return %}
                      <p>{{order.return_status}}</p>
                      {% else %}
                        {% if order.is_cancelled or order.status == "Cancelled" %}
                        <p style="color:red">Order cancelled</p>
                      

                        {% else %}
                        <div class="orders-order-status">Status: {{ order.status }}</div>
                        {% endif %}
                        {% endif %}
                    </div>
                    <div class="orders-order-total">${{ order.total_price }}</div>
                </div>
              </a>
            {% endfor %}
        {% else %}
            <p>No orders found.</p>
        {% endif %}
    </div>

    {% endblock content %}